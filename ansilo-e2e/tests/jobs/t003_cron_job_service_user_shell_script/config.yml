name: Auth

networking:
  port: 0 # use kernel-allocated port

auth:
  users:
    - username: app
      password: pass
    - username: svc
      password: svc_pass

  service_users:
    - username: svc
      shell: |
        echo '{"password": "svc_pass"}'

jobs:
  - id: cron_job
    service_user_id: svc
    triggers:
      - cron: "* * * * * *"
    sql: |
      UPDATE jobs 
      SET 
        runs = runs + 1, 
        usr = current_user

postgres:
    install_dir: ${env:ANSILO_TEST_PG_DIR:/usr/lib/postgresql/14/}
    init_sql_path: ${dir}/ansilo-sql/*.sql
    data_dir: ${arg:TEMP_DIR}/data
    listen_socket_dir_path: ${arg:TEMP_DIR}
    fdw_socket_path: /tmp//fdw.sock
    build_info_path: ${arg:TEMP_DIR}/build-info.json